/* ============================================
   EFSVP - PREMIUM UNIFIED STYLES
   Excellence PR: Hero, Stats, Témoignages, FAQ, Design System
   ============================================ */

/* ========== A) HERO - CTA FOCAL PREMIUM ========== */

/* CTA Hero: border-radius 12px, ombre douce premium */
.btn--hero {
  border-radius: var(--radius-md) !important; /* 12px au lieu de pill */
  box-shadow: var(--shadow-hero-cta) !important; /* 0 24px 48px rgba(0,0,0,.40) */
  font-weight: 700 !important;
  color: #ffffff !important;
  transition:
    transform 200ms ease-out,
    box-shadow 200ms ease-out !important;
}

.btn--hero:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 28px 56px rgba(0, 0, 0, 0.44) !important; /* Ombre +10% */
}

.btn--hero:active {
  transform: translateY(0) !important;
}

/* Hero CTA group - centré */
.hero__cta-group {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  margin: var(--space-8) auto !important;
  gap: 0 !important;
}

/* ========== B) CHIFFRES DU HÉRO - MINIMALISTE ========== */

/* Container stats: pas de fond massif, transparent */
.hero__trust-metrics {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  gap: clamp(var(--space-8), 6vw, var(--space-16)) !important;
  margin: var(--space-12) auto 0 !important;
  flex-wrap: wrap !important;
  position: relative !important;
  padding: 0 !important;
  border-radius: 0 !important;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Chaque stat item */
.hero__metric {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  gap: var(--space-2) !important;
  padding: 0 var(--space-6) !important;
  position: relative !important;
}

/* Divider vertical entre stats (desktop) */
.hero__metric:not(:last-child)::after {
  content: '';
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 1px;
  height: 40px;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0),
    rgba(255, 255, 255, 0.1) 50%,
    rgba(255, 255, 255, 0)
  );
}

@media (max-width: 768px) {
  .hero__trust-metrics {
    gap: var(--space-8) !important;
    flex-direction: column !important;
  }

  .hero__metric:not(:last-child)::after {
    display: none !important;
  }
}

/* Chiffre: xl, blanc haute lisibilité */
.hero__metric strong {
  font-family: var(--font-sans) !important;
  font-size: clamp(2.5rem, 5vw, 3.5rem) !important; /* ~40-56px */
  font-weight: 700 !important;
  color: #ffffff !important;
  line-height: 1 !important;
  display: block !important;
  text-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important;
}

/* Label: uppercase, tracking wide, blanc 70-80% */
.hero__metric span {
  font-family: var(--font-sans) !important;
  font-size: var(--text-xs) !important;
  color: rgba(255, 255, 255, 0.75) !important;
  text-transform: uppercase !important;
  letter-spacing: 0.18em !important; /* Tracking wide */
  font-weight: 500 !important;
}

/* ========== C) TÉMOIGNAGES - CONTRASTE AA ========== */

/* Section testimonials: fond sombre premium */
.testimonials {
  background: linear-gradient(
    to bottom,
    var(--dark-section-bg),
    var(--dark-section-bg-end)
  ) !important;
  color: var(--text-on-dark) !important;
}

/* Titre section sur fond sombre */
.testimonials .section__title {
  color: var(--text-on-dark) !important; /* #F6F3EF */
}

/* Carousel container */
.testimonials__carousel {
  max-width: 900px;
  margin: 0 auto;
  padding-bottom: var(--space-12);
}

/* Carte testimonial sur fond sombre */
.testimonial-card {
  background: rgba(30, 40, 50, 0.6) !important; /* Fond semi-transparent dark */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: var(--radius-lg) !important; /* 20px */
  padding: var(--space-8) !important;
  box-shadow: var(--shadow-dark-card) !important; /* 0 16px 40px rgba(0,0,0,.25) */
  transition:
    transform 200ms ease,
    box-shadow 200ms ease !important;
}

.testimonial-card:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 20px 48px rgba(0, 0, 0, 0.3) !important;
}

/* Quote: blanc haute lisibilité */
.testimonial-card__quote {
  font-family: var(--font-accent) !important;
  font-size: var(--text-2xl) !important;
  font-style: italic !important;
  line-height: 1.5 !important;
  margin-bottom: var(--space-6) !important;
  color: #f6f3ef !important; /* Blanc cassé premium */
}

/* Nom auteur */
.testimonial-card__name {
  font-size: var(--text-lg) !important;
  font-weight: 600 !important;
  font-style: normal !important;
  display: block !important;
  margin-bottom: var(--space-1) !important;
  color: #ffffff !important;
}

/* Rôle et contexte */
.testimonial-card__role {
  font-size: var(--text-sm) !important;
  color: rgba(255, 255, 255, 0.7) !important; /* 70% opacité pour AA */
  line-height: 1.6 !important;
}

.testimonial-card__context {
  display: inline-block;
  font-size: var(--text-xs) !important;
  color: var(--accent-2) !important; /* Orange clair */
  font-style: italic !important;
  margin-top: var(--space-1) !important;
}

/* Étoiles: couleur gold */
.testimonial-card__stars svg {
  width: 20px;
  height: 20px;
  color: var(--accent-gold) !important;
}

/* ========== D) FAQ - MICRO-UX PREMIUM ========== */

/* Section FAQ */
.faq {
  background-color: var(--surface) !important;
}

/* Grid FAQ */
.faq__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
  gap: var(--space-4);
  max-width: 1100px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .faq__grid {
    grid-template-columns: 1fr;
  }
}

/* FAQ Item: transparent quand fermé, surface quand ouvert */
.faq__item {
  background: transparent !important;
  border-radius: var(--radius-lg) !important; /* 20px */
  overflow: visible !important;
  border: none !important;
  transition: all var(--duration-base) var(--ease-smooth) !important;
  margin-bottom: var(--space-3) !important;
}

/* État ouvert: fond surface, border, shadow */
.faq__item.active {
  background: var(--surface-elevated) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius-lg) !important; /* 20px */
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.08) !important;
}

/* Question button */
.faq__question {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-5) var(--space-6) !important;
  background: transparent !important;
  border: none !important;
  border-radius: var(--radius-lg) !important;
  font-family: var(--font-body) !important;
  font-size: var(--text-lg) !important;
  font-weight: 600 !important;
  text-align: left !important;
  color: var(--text) !important;
  cursor: pointer !important;
  transition: all var(--duration-base) var(--ease-smooth) !important;
}

/* Question fermée: padding réduit */
.faq__item:not(.active) .faq__question {
  padding: var(--space-4) var(--space-5) !important;
}

/* Hover question */
.faq__question:hover {
  background-color: rgba(216, 198, 180, 0.15) !important;
}

/* Focus visible */
.faq__question:focus-visible {
  outline: 3px solid var(--accent) !important;
  outline-offset: 2px !important;
}

/* Icône: chevron au lieu de X */
.faq__icon {
  width: 20px;
  height: 20px;
  color: var(--accent) !important;
  transition:
    transform var(--duration-base) var(--ease-smooth),
    color var(--duration-base) var(--ease-smooth) !important;
  flex-shrink: 0;
}

/* Hover icône */
.faq__question:hover .faq__icon {
  color: var(--accent-hover) !important;
}

/* Rotation icône quand ouvert (45deg pour le + qui devient x) */
.faq__question[aria-expanded='true'] .faq__icon {
  transform: rotate(45deg) !important;
}

/* Réponse */
.faq__answer {
  max-height: 0;
  overflow: hidden;
  transition:
    max-height var(--duration-slow) var(--ease-smooth),
    padding var(--duration-slow) var(--ease-smooth) !important;
}

.faq__item.active .faq__answer {
  max-height: 800px !important;
  padding: 0 var(--space-6) var(--space-6) !important;
}

.faq__answer p {
  font-size: var(--text-base) !important;
  line-height: 1.6 !important;
  color: var(--text-secondary) !important;
  max-width: 60ch !important;
}

/* Hover subtil sur item fermé (desktop) */
@media (min-width: 769px) {
  .faq__item:not(.active):hover {
    transform: translateY(-2px);
  }
}

/* ========== E) UNIFORMISATION BORDER-RADIUS ========== */

/* Uniformise tous les composants à var(--radius-lg) = 20px ou var(--radius-md) = 12px */
.bento-item,
.service-card,
.portfolio-card,
.case-card,
.pricing-card,
.process__step {
  border-radius: var(--radius-lg) !important; /* 20px pour cards */
}

/* Boutons: radius-md = 12px */
.btn {
  border-radius: var(--radius-md) !important; /* 12px */
}

/* Inputs et search */
input,
textarea,
select,
.faq__search-input {
  border-radius: var(--radius-md) !important; /* 12px */
}

/* ========== F) MOTION SOBRE & GUIDAGE ========== */

/* Process steps: fade + translateY au scroll */
.process__step {
  opacity: 0;
  transform: translateY(8px);
  transition:
    opacity 0.8s var(--ease-out-expo),
    transform 0.8s var(--ease-out-expo);
}

.process__step.is-inview {
  opacity: 1;
  transform: translateY(0);
}

/* Stagger: ajouter delay via JS ou CSS nth-child */
.process__step:nth-child(1) {
  transition-delay: 0ms;
}
.process__step:nth-child(2) {
  transition-delay: 80ms;
}
.process__step:nth-child(3) {
  transition-delay: 160ms;
}
.process__step:nth-child(4) {
  transition-delay: 240ms;
}

/* Hover cards: légère élévation */
.service-card,
.portfolio-card,
.case-card,
.pricing-card {
  transition:
    transform 200ms ease,
    box-shadow 200ms ease;
}

.service-card:hover,
.portfolio-card:hover,
.case-card:hover,
.pricing-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg) !important;
}

/* Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .process__step,
  .service-card,
  .portfolio-card,
  .case-card,
  .pricing-card,
  .btn,
  .faq__item {
    transition: none !important;
    animation: none !important;
  }
}

/* ========== G) NAV / ÉTATS / FOCUS ========== */

/* Navigation links: states clairs */
.nav__link {
  position: relative;
  transition: color var(--duration-base) var(--ease-smooth);
}

.nav__link:hover {
  color: var(--accent-hover);
}

.nav__link:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 4px;
  border-radius: var(--radius-sm);
}

/* Current page indicator */
.nav__link[aria-current='page'] {
  color: var(--accent);
  font-weight: 600;
}

/* Portfolio filters */
.portfolio__filter-btn {
  transition: all var(--duration-base) var(--ease-smooth);
}

.portfolio__filter-btn:hover {
  background-color: rgba(184, 68, 30, 0.1);
  color: var(--accent);
}

.portfolio__filter-btn:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

.portfolio__filter-btn.active {
  background-color: var(--accent);
  color: white;
}

/* Boutons: grammaire unifiée */
.btn,
.btn--primary,
.btn--secondary,
.btn--ghost {
  min-height: 44px; /* Accessibilité touch target */
  padding: var(--space-4) var(--space-8);
  font-size: var(--text-base);
  font-weight: 600;
  border-radius: var(--radius-md); /* 12px partout */
  transition: all 200ms ease-out;
}

.btn:focus-visible,
.btn--primary:focus-visible,
.btn--secondary:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 4px;
}

/* ========== H) HERO SCROLL INDICATOR (BONUS) ========== */

/* Scroll indicator en bas du hero */
.hero__scroll {
  position: absolute;
  bottom: var(--space-8);
  left: 50%;
  transform: translateX(-50%);
  background: transparent;
  border: none;
  padding: var(--space-2);
  cursor: pointer;
  opacity: 0.6;
  transition:
    opacity 200ms ease,
    transform 200ms ease;
  z-index: 10;
}

.hero__scroll:hover {
  opacity: 1;
  transform: translateX(-50%) translateY(4px);
}

.hero__scroll:focus-visible {
  outline: 3px solid rgba(255, 255, 255, 0.8);
  outline-offset: 4px;
  border-radius: var(--radius-sm);
}

.hero__scroll-chevron {
  width: 32px;
  height: 32px;
  color: rgba(255, 255, 255, 0.9);
  animation: scrollBounce 2s ease-in-out infinite;
}

@keyframes scrollBounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(8px);
  }
}

/* ========== ACCESSIBILITY & HIGH CONTRAST ========== */

@media (prefers-contrast: high) {
  .btn--primary,
  .btn--hero {
    border: 2px solid var(--text);
  }

  .testimonial-card {
    border: 2px solid rgba(255, 255, 255, 0.3) !important;
  }
}
